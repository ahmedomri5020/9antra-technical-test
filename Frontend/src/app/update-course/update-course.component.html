<div class="container">
  <mat-card class="add-course-card">
    <mat-card-header>
      <mat-card-title class="text-center">
        {{ isEditing ? 'Update' : 'Create' }} Course
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="courseForm" (ngSubmit)="onSubmit()" class="course-form">
        
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Course ID</mat-label>
          <input
            matInput
            type="text"
            id="idCourse"
            formControlName="idCourse"
            [readonly]="isEditing"
            required
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Course Name</mat-label>
          <input
            matInput
            type="text"
            id="nomCourse"
            formControlName="nomCourse"
            required
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Price</mat-label>
          <input
            matInput
            type="number"
            id="prixCourse"
            formControlName="prixCourse"
            required
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Description</mat-label>
          <textarea
            matInput
            id="detailsCourse"
            formControlName="detailsCourse"
            required
          ></textarea>
        </mat-form-field>

        <!-- Display Current Image -->
        <div *ngIf="courseForm.value.imageStr" class="full-width">
          <mat-label>Current Image</mat-label>
          <div>
            <img
              [src]="courseForm.value.imageStr"
              alt="Course Image"
              class="img-fluid"
            />
          </div>
        </div>

        <!-- Image Upload -->
        <div>
          <mat-label>Update Image</mat-label>
          <input
            type="file"
            id="courseImage"
            (change)="onFileSelected($event)"
            accept="image/*"
          />
        </div>

        <div class="text-center">
          <button mat-raised-button color="primary" type="submit" [disabled]="courseForm.invalid">
            {{ isEditing ? 'Update' : 'Create' }}
          </button>
          <button mat-raised-button color="accent" type="button" class="ml-2" (click)="resetForm()">
            Cancel
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
